var GeocodeMap=React.createClass({displayName:"GeocodeMap",initMap:function(){var i=this.state.lat||59.329323499999987,r=this.state.lng||18.068580800000063,u={zoom:12,center:new google.maps.LatLng(i,r)},n=new google.maps.Map(React.findDOMNode(this.refs.map),u),t=new google.maps.Marker({position:n.getCenter(),map:n});google.maps.event.addListener(n,"click",function(n){var i=n.latLng.lat(),r=n.latLng.lng(),u=new google.maps.LatLng(i,r);this.setState({lat:i,lng:r});this.props.onPickPosition({lat:i,lng:r});t.setPosition(u)}.bind(this));this.geocoder=new google.maps.Geocoder;this.map=n;this.marker=t},geoCodeIt:function(n){var i=this.geocoder,t=this.map,r=this.marker;i.geocode(n,function(n,i){var u,f,e;if(i==google.maps.GeocoderStatus.OK){t.setCenter(n[0].geometry.location);u=n[0].geometry.location;r.setPosition(u);f=u.lat();e=u.lng();this.setState({lat:f,lng:e});this.props.onPickPosition({lat:f,lng:e});n[0].geometry.viewport&&t.fitBounds(n[0].geometry.viewport)}else toastIt("Geocode was not successful for the following reason: "+i)}.bind(this))},handleSubmit:function(n){n.preventDefault();var t=React.findDOMNode(this.refs.address).value.trim();this.geoCodeIt({address:t,region:"se"})},componentWillReciveProps:function(n){this.setState({lat:n.lat,lng:n.lng});this.initMap()},getInitialState:function(){return{lat:this.props.lat,lng:this.props.lng}},componentDidMount:function(){this.initMap();$(".txt-address").focus()},render:function(){return React.createElement("div",null,React.createElement("h2",{className:"content-sub-heading"},"Välj kartposition"),React.createElement("p",null,"Sök efter en plats eller klicka på kartan för att markera kartposition."),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-12"},React.createElement("input",{className:"form-control form-control-default txt-address input-inline",placeholder:"Plats",type:"text",ref:"address"}),React.createElement("input",{className:"btn btn-blue btn-inline",type:"submit",value:"Sök"}))))),React.createElement("div",{className:"map-holder",style:{height:"350px"},ref:"map"}))}}),GoogleMap=React.createClass({displayName:"GoogleMap",initDynamicMap:function(){var r={zoom:16,center:new google.maps.LatLng(this.props.lat,this.props.lng)},i=new google.maps.Map(React.findDOMNode(this.refs.map),r),n=new google.maps.LatLng(this.props.lat,this.props.lng),u=new google.maps.Marker({position:n,map:i}),t;this.props.positions&&(t=new google.maps.LatLngBounds,t.extend(n),this.props.positions.forEach(function(r){n=new google.maps.LatLng(r.lat,r.lng);var u=new google.maps.Marker({position:n,map:i,title:r.name});t.extend(n)}),i.fitBounds(t))},loadScript:function(){var n=document.createElement("script");n.type="text/javascript";window.googleMapCallback=this.initDynamicMap;n.src="https://maps.googleapis.com/maps/api/js?callback=googleMapCallback";document.body.appendChild(n)},getMapSrc:function(){return"https://maps.googleapis.com/maps/api/staticmap?center="+this.props.lat+","+this.props.lng+"&markers=color:blue%7C"+this.props.lat+","+this.props.lng+"&zoom=16&size=450x450&sensor=false"},getInitialState:function(){var n=!1,t;return this.props.positions&&this.props.positions.length>0&&(n=!0),t=n?"":this.getMapSrc(),{mapSrc:t,isMultiMarker:n}},componentDidMount:function(){this.props.positions&&this.props.positions.length>0&&("google"in window?this.initDynamicMap():this.loadScript())},render:function(){var n,t;return this.state.isMultiMarker?(t={height:"350px"},n=React.createElement("div",{className:"map-holder",ref:"map",style:t})):n=React.createElement("img",{src:this.state.mapSrc,className:"map-holder"}),React.createElement("div",null,n)}}),EmojiPicker=React.createClass({displayName:"EmojiPicker",handleEmojiClick:function(n){this.props.onEmojiSelected(n)},handleOptionClick:function(n){this.setState({type:n})},getInitialState:function(){return{type:"people"}},render:function(){var n={people:[":smile:",":smiley:",":grinning:",":blush:",":relaxed:",":wink:",":heart_eyes:",":kissing_heart:",":kissing_closed_eyes:",":kissing:",":kissing_smiling_eyes:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue:",":flushed:",":grin:",":pensive:",":relieved:",":unamused:",":disappointed:",":persevere:",":cry:",":joy:",":sob:",":sleepy:",":disappointed_relieved:",":cold_sweat:",":sweat_smile:",":sweat:",":weary:",":tired_face:",":fearful:",":scream:",":angry:",":rage:",":triumph:",":confounded:",":laughing:",":yum:",":mask:",":sunglasses:",":sleeping:",":dizzy_face:",":astonished:",":worried:",":frowning:",":anguished:",":smiling_imp:",":imp:",":open_mouth:",":grimacing:",":neutral_face:",":confused:",":hushed:",":no_mouth:",":innocent:",":smirk:",":expressionless:",":man_with_gua_pi_mao:",":man_with_turban:",":cop:",":construction_worker:",":guardsman:",":baby:",":boy:",":girl:",":man:",":woman:",":older_man:",":older_woman:",":person_with_blond_hair:",":angel:",":princess:",":smiley_cat:",":smile_cat:",":heart_eyes_cat:",":kissing_cat:",":smirk_cat:",":scream_cat:",":crying_cat_face:",":joy_cat:",":pouting_cat:",":japanese_ogre:",":japanese_goblin:",":see_no_evil:",":hear_no_evil:",":speak_no_evil:",":skull:",":alien:",":poop:",":fire:",":sparkles:",":star2:",":dizzy:",":boom:",":anger:",":sweat_drops:",":droplet:",":zzz:",":dash:",":ear:",":eyes:",":nose:",":tongue:",":lips:",":thumbsup:",":thumbsdown:",":ok_hand:",":punch:",":fist:",":v:",":wave:",":raised_hand:",":open_hands:",":point_up_2:",":point_down:",":point_right:",":point_left:",":raised_hands:",":pray:",":point_up:",":clap:",":muscle:",":walking:",":runner:",":dancer:",":couple:",":family:",":two_men_holding_hands:",":two_women_holding_hands:",":couplekiss:",":couple_with_heart:",":dancers:",":ok_woman:",":no_good:",":information_desk_person:",":raising_hand:",":massage:",":haircut:",":nail_care:",":bride_with_veil:",":person_with_pouting_face:",":person_frowning:",":bow:",":tophat:",":crown:",":womans_hat:",":athletic_shoe:",":mans_shoe:",":sandal:",":high_heel:",":boot:",":shirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":ribbon:",":closed_umbrella:",":lipstick:",":yellow_heart:",":blue_heart:",":purple_heart:",":green_heart:",":heart:",":broken_heart:",":heartpulse:",":heartbeat:",":two_hearts:",":sparkling_heart:",":revolving_hearts:",":cupid:",":love_letter:",":kiss:",":ring:",":gem:",":bust_in_silhouette:",":busts_in_silhouette:",":speech_balloon:",":footprints:",":thought_balloon:"],nature:[":dog:",":wolf:",":cat:",":mouse:",":hamster:",":rabbit:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":sheep:",":elephant:",":panda_face:",":penguin:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":snake:",":turtle:",":bug:",":bee:",":ant:",":beetle:",":snail:",":octopus:",":shell:",":tropical_fish:",":fish:",":dolphin:",":whale:",":whale2:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":racehorse:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":camel:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":feet:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":ear_of_rice:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":crescent_moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":stars:",":star:",":sunny:",":partly_sunny:",":cloud:",":zap:",":umbrella:",":snowflake:",":snowman:",":cyclone:",":foggy:",":rainbow:",":ocean:"],objects:[":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crossed_flags:",":crystal_ball:",":movie_camera:",":camera:",":video_camera:",":vhs:",":cd:",":dvd:",":minidisc:",":floppy_disk:",":computer:",":iphone:",":telephone:",":telephone_receiver:",":pager:",":fax:",":satellite:",":tv:",":radio:",":loud_sound:",":sound:",":speaker:",":mute:",":bell:",":no_bell:",":loudspeaker:",":mega:",":hourglass_flowing_sand:",":hourglass:",":alarm_clock:",":watch:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":mag_right:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":mag:",":bathtub:",":bath:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":door:",":smoking:",":bomb:",":gun:",":knife:",":pill:",":syringe:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":calling:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":envelope_with_arrow:",":incoming_envelope:",":postal_horn:",":mailbox:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":postbox:",":package:",":pencil:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":date:",":calendar:",":card_index:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":book:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":art:",":clapper:",":microphone:",":headphones:",":musical_score:",":musical_note:",":notes:",":musical_keyboard:",":violin:",":trumpet:",":saxophone:",":guitar:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":mahjong:",":game_die:",":dart:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":checkered_flag:",":horse_racing:",":trophy:",":ski:",":snowboarder:",":swimmer:",":surfer:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:"],places:[":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunset:",":city_dusk:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":night_with_stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":sailboat:",":speedboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":seat:",":helicopter:",":steam_locomotive:",":tram:",":station:",":mountain_railway:",":train2:",":bullettrain_side:",":bullettrain_front:",":light_rail:",":metro:",":monorail:",":train:",":railway_car:",":trolleybus:",":bus:",":oncoming_bus:",":blue_car:",":oncoming_automobile:",":red_car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":truck:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":barber:",":busstop:",":ticket:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":fuelpump:",":izakaya_lantern:",":slot_machine:",":hotsprings:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:",":cn:",":us:",":in:",":jp:",":br:",":ru:",":de:",":nigeria:",":gb:",":fr:",":mx:",":kr:",":indonesia:",":ph:",":eg:",":vn:",":tr:",":it:",":es:",":ca:",":pl:",":ar:",":co:",":ir:",":za:",":my:",":pk:",":au:",":th:",":ma:",":tw:",":nl:",":ua:",":saudiarabia:",":ke:",":ve:",":pe:",":ro:",":chile:",":uz:",":bd:",":kz:",":be:",":se:",":cz:",":sd:",":hu:",":pt:",":ch:",":at:",":tz:"],symbols:[":hash:",":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":zero:",":keycap_ten:",":1234:",":symbols:",":arrow_up:",":arrow_down:",":arrow_left:",":arrow_right:",":capital_abcd:",":abcd:",":abc:",":arrow_upper_right:",":arrow_upper_left:",":arrow_lower_right:",":arrow_lower_left:",":left_right_arrow:",":arrow_up_down:",":arrows_counterclockwise:",":arrow_backward:",":arrow_forward:",":arrow_up_small:",":arrow_down_small:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":information_source:",":rewind:",":fast_forward:",":arrow_double_up:",":arrow_double_down:",":arrow_heading_down:",":arrow_heading_up:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":up:",":cool:",":free:",":ng:",":signal_strength:",":cinema:",":koko:",":u6307:",":u7a7a:",":u6e80:",":u5408:",":u7981:",":ideograph_advantage:",":u5272:",":u55b6:",":u6709:",":u7121:",":restroom:",":mens:",":womens:",":baby_symbol:",":wc:",":potable_water:",":put_litter_in_its_place:",":parking:",":wheelchair:",":no_smoking:",":u6708:",":u7533:",":sa:",":m:",":passport_control:",":baggage_claim:",":left_luggage:",":customs:",":accept:",":secret:",":congratulations:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":sparkle:",":negative_squared_cross_mark:",":white_check_mark:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":loop:",":recycle:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":atm:",":chart:",":heavy_dollar_sign:",":currency_exchange:",":copyright:",":registered:",":tm:",":part_alternation_mark:",":wavy_dash:",":top:",":end:",":back:",":on:",":soon:",":x:",":o:",":exclamation:",":question:",":grey_exclamation:",":grey_question:",":bangbang:",":interrobang:",":arrows_clockwise:",":clock12:",":clock1230:",":clock1:",":clock130:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock7:",":clock8:",":clock9:",":clock10:",":clock11:",":clock630:",":clock730:",":clock830:",":clock930:",":clock1030:",":clock1130:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":spades:",":hearts:",":clubs:",":diamonds:",":white_flower:",":100:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":trident:",":black_square_button:",":white_square_button:",":black_medium_square:",":white_medium_square:",":black_medium_small_square:",":white_medium_small_square:",":black_small_square:",":white_small_square:",":small_red_triangle:",":white_large_square:",":black_large_square:",":black_circle:",":white_circle:",":red_circle:",":large_blue_circle:",":small_red_triangle_down:",":large_orange_diamond:",":large_blue_diamond:",":small_orange_diamond:",":small_blue_diamond:"]}[this.state.type],t=n.map(function(n,t){return React.createElement("span",{dangerouslySetInnerHTML:{__html:emojione.toImage(n)},key:t,onClick:this.handleEmojiClick.bind(null,n)})}.bind(this)),i=[{type:"people",short:":smile:"},{type:"nature",short:":blossom:"},{type:"objects",short:":bell:"},{type:"places",short:":oncoming_automobile:"},{type:"symbols",short:":hash:"}].map(function(n,t){return React.createElement("span",{dangerouslySetInnerHTML:{__html:emojione.toImage(n.short)},key:t,onClick:this.handleOptionClick.bind(null,n.type)})}.bind(this));return React.createElement("div",null,React.createElement("div",{className:"emoji-options"},i),React.createElement("div",{className:"emoji-list"},t))}}),ImageUploader=React.createClass({displayName:"ImageUploader",handleSubmit:function(n){var t,i,r;n.preventDefault();t=new FormData;i=$("#fileUpload").get(0).files;i.length>0&&t.append("file",i[0]);r=$.ajax({type:"POST",url:"/image/upload",contentType:!1,processData:!1,data:t});r.done(function(n){this.props.onImageUploaded(n)}.bind(this));r.error(function(){toastIt("Något verkar ha gått fel när vi skulle ladda upp din bild :( Försök igen.")})},render:function(){return React.createElement("form",{id:"image-upload-form",onSubmit:this.handleSubmit},React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Ladda upp en bild (om du vill använda det till frågan)"),React.createElement("input",{id:"fileUpload",type:"file",name:"file",className:"form-control-default form-control"}),React.createElement("p",null,React.createElement("input",{type:"submit",className:"btn btn-blue",value:"Ladda upp"}))))))}}),RiddleForm=React.createClass({displayName:"RiddleForm",handleMapPosition:function(n){var t=this.state.riddle;t.Latitude=n.lat;t.Longitude=n.lng;this.setState({riddle:t})},handleEmojiSelected:function(n){var t=this.state.riddle;t.Description=(t.Description||"")+" "+n+" ";this.setState({riddle:t})},handleCancel:function(){var t=this.state.original,n=this.state.riddle;n=$.extend(!0,n,t);this.setState({riddle:n});this.props.onRiddleCancel()},handleSubmit:function(n){return n.preventDefault(),!1},isValid:function(){var n,t;return this.refs.riddle.getDOMNode().value?(n=this.refs.answer.getDOMNode().value,!n)?(toastIt("Du måste skriva in ett svar"),!1):(t=/^[a-z 0-9]+$/i,!t.test(n))?(toastIt("Endast bokstäver, siffror och mellanslag är tillåtet i svaret."),!1):this.refs.locationname.getDOMNode().value?this.refs.lat.getDOMNode().value?!0:(toastIt("Du måste markera rebusens plats på kartan"),!1):(toastIt("Du måste skriva in vilken plats rebusen leder till"),!1):(toastIt("Du måste skriva in en rebus"),!1)},handleSaveForm:function(n){if(n.preventDefault(),!this.isValid())return!1;var t={};$("#riddle-form").serializeArray().map(function(n){t[n.name]=n.value});t.Latitude=this.refs.lat.getDOMNode().value;t.Longitude=this.refs.lng.getDOMNode().value;t.Description=emojione.toShort(t.Description);this.props.onRiddleSubmit(t);this.refs.riddle.getDOMNode().value="";this.refs.answer.getDOMNode().value="";this.refs.lat.getDOMNode().value="";this.refs.lng.getDOMNode().value=""},handleShowEmojiPicker:function(){this.setState({showEmojiPicker:!0})},handleShowMap:function(){this.setState({showMap:!0})},handleChange:function(n,t){var r=this.state.riddle,i=t.target.value;n==="Description"&&(i=i.replace(/<|>/g,""));r[n]=i;this.setState({riddle:r})},getInitialState:function(){var n=$.extend(!0,{},this.props.riddle);return{riddle:this.props.riddle,original:n}},render:function(){var n,t,i,r={width:"80px",display:"inline-block"};return this.state.riddle.Description&&(n=React.createElement("p",{dangerouslySetInnerHTML:{__html:emojione.toImage(this.state.riddle.Description)}})),this.state.showMap&&(t=React.createElement(GeocodeMap,{lat:this.state.riddle.Latitude,lng:this.state.riddle.Longitude,onPickPosition:this.handleMapPosition})),this.state.showEmojiPicker&&(i=React.createElement(EmojiPicker,{onEmojiSelected:this.handleEmojiSelected})),React.createElement("div",null,n,React.createElement("form",{id:"riddle-form",ref:"riddleform",onSubmit:this.handleSubmit,className:"form"},React.createElement("input",{type:"hidden",name:"Id",ref:"id",value:this.props.riddle.Id}),React.createElement("input",{type:"hidden",name:"HuntId",value:this.props.huntId}),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Rebus"),React.createElement("textarea",{id:"Description",rows:"3",cols:"30",className:"form-control form-control-default",name:"Description",ref:"riddle",value:this.state.riddle.Description,onChange:this.handleChange.bind(this,"Description")}),React.createElement("span",{className:"form-help form-help-msg"},"Du kan använda emojis i texten (välj nedan om du inte redan har stöd från emojis)"),React.createElement("p",null,React.createElement("a",{className:"btn collapsed waves-button waves-effect","data-toggle":"collapse",href:"#collapsible-emoji-region",onClick:this.handleShowEmojiPicker},React.createElement("span",{className:"collapsed-hide"},"Dölj"),React.createElement("span",{className:"collapsed-show"},"Välj emoji"))),React.createElement("div",{className:"collapsible-region collapse",id:"collapsible-emoji-region"},i)))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Svar"),React.createElement("input",{id:"Answer",className:"form-control form-control-default",type:"text",name:"Answer",ref:"answer",value:this.state.riddle.Answer,onChange:this.handleChange.bind(this,"Answer")})))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Namn på plats där frågorna finns"),React.createElement("input",{className:"form-control form-control-default",type:"text",name:"LocationName",ref:"locationname",value:this.state.riddle.LocationName,onChange:this.handleChange.bind(this,"LocationName")}))))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("p",null,React.createElement("input",{name:"Latitude",type:"text",placeholder:"Latitud",ref:"lat",readOnly:!0,value:this.state.riddle.Latitude,onChange:this.handleChange.bind(this,"Latitude"),className:"form-control form-control-default",style:r}),React.createElement("input",{name:"Longitude",type:"text",placeholder:"Longitud",ref:"lng",readOnly:!0,value:this.state.riddle.Longitude,onChange:this.handleChange.bind(this,"Longitude"),className:"form-control form-control-default",style:r})),React.createElement("a",{className:"btn collapsed waves-button waves-effect","data-toggle":"collapse",href:"#collapsible-map-region",onClick:this.handleShowMap},React.createElement("span",{className:"collapsed-hide"},"Dölj"),React.createElement("span",{className:"collapsed-show"},"Välj kartposition")),React.createElement("div",{className:"collapsible-region collapse",id:"collapsible-map-region"},t)))),React.createElement("div",{className:"form-group-btn"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("button",{className:"btn btn-blue waves-button waves-light waves-effect",onClick:this.handleSaveForm},"Spara")," ",React.createElement("a",{className:"btn btn-flat btn-red waves-button waves-effect",onClick:this.handleCancel},"Avbryt")))))}}),RiddleList=React.createClass({displayName:"RiddleList",handleEdit:function(n,t){t.preventDefault();this.props.onRiddleEdit(n)},handleDelete:function(n,t){if(t.preventDefault(),confirm("Är du säker på att du vill ta bort rebusen?"))this.props.onRiddleDelete(n)},addQuestions:function(n,t){t.preventDefault();this.props.onRiddleNewQuestions(n)},render:function(){var n=this.props.data.map(function(n){return React.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6"},React.createElement("div",{className:"card"},React.createElement("div",{className:"card-main"},React.createElement("div",{className:"card-inner"},React.createElement("p",{dangerouslySetInnerHTML:{__html:emojione.toImage(n.Description)}}),React.createElement("p",null,n.Answer),React.createElement("p",null,"Antal frågor: ",n.Questions.length)),React.createElement("div",{className:"card-action"},React.createElement("ul",{className:"nav nav-list pull-left"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.addQuestions.bind(this,n)},React.createElement("span",{className:"text-blue"},"Frågor"))),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleEdit.bind(this,n),title:"Ändra"},React.createElement("span",{className:"access-hide"},"Ändra"),React.createElement("span",{className:"icon icon-edit"}))),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleDelete.bind(this,n),title:"Ta bort"},React.createElement("span",{className:"access-hide"},"Ta bort"),React.createElement("span",{className:"icon icon-delete"}))))))))}.bind(this));return React.createElement("div",{className:"card-wrap"},React.createElement("div",{className:"row"},n))}}),RiddleCreator=React.createClass({displayName:"RiddleCreator",handleNewRiddleClick:function(){this.setState({showRiddleForm:!0,riddle:{Id:0}})},handleRiddleSubmit:function(n){n.Id>0?this.saveRiddleEdit(n):this.saveNewRiddle(n)},handleRiddleCancel:function(){var n=this.state.data;this.setState({data:n,showRiddleForm:!1})},saveNewRiddle:function(n){var t=this.state.data;$.post("/riddleadmin/addriddle",n,function(n){n.errors.length===0?(t.unshift(n.riddle),this.setState({data:t,showRiddleForm:!1})):console.log(n.errors)}.bind(this),"json")},saveRiddleEdit:function(n){var t=this.state.data;$.post("/riddleadmin/editriddle",n,function(n){n.errors.length===0?this.setState({data:t,showRiddleForm:!1}):console.log(n.errors)}.bind(this),"json")},handleRiddleEdit:function(n){this.setState({showRiddleForm:!0,riddle:n})},handleRiddleDelete:function(n){var i=this.state.data,t;for($.post("/riddleadmin/deleteriddle",{id:n.Id},"json"),t=i.length-1;t>=0;t--)if(i[t].Id===n.Id){i.splice(t,1);break}this.setState({data:i,showRiddleForm:!1})},handleRiddleNewQuestions:function(n){$("#riddle-container").hide();$("#question-container").show();React.render(React.createElement(QuestionCreator,{riddle:n,onQuestionsComplete:this.handleQuestionsComplete}),document.getElementById("question-container"))},handleQuestionsComplete:function(){$("#question-container").hide();$("#riddle-container").show();var n=this.state.data;this.setState({data:n,showRiddleForm:!1})},handleShowMap:function(){var n=this.state.data,t=n.map(function(n){return{lat:n.Latitude,lng:n.Longitude,name:n.LocationName}});this.setState({showMap:!0,positions:t})},handleHideMap:function(){var n=this.state.data;this.setState({data:n,showRiddleForm:!1,showMap:!1})},getInitialState:function(){return{data:this.props.initialData,showRiddleForm:!1}},render:function(){var i,r,u,f,e,o,s,h,n,t;return this.state.showRiddleForm?(h=this.state.riddle,i=React.createElement(RiddleForm,{riddle:h,onRiddleSubmit:this.handleRiddleSubmit,onRiddleCancel:this.handleRiddleCancel,huntId:this.props.huntId})):this.state.showMap?(n=this.state.positions,t=n.shift(),f=React.createElement("div",null,React.createElement(GoogleMap,{lat:t.lat,lng:t.lng,positions:n}),React.createElement("a",{href:"#",className:"btn btn-blue btn-flat",onClick:this.handleHideMap},"Tillbaka"))):(o=React.createElement("h2",{className:"content-sub-heading"},"Lägg till nya eller redigera befintliga rebusar"),u=React.createElement("button",{className:"btn btn-blue",onClick:this.handleNewRiddleClick},"Lägg till ny rebus"),r=React.createElement(RiddleList,{data:this.state.data,onRiddleEdit:this.handleRiddleEdit,onRiddleDelete:this.handleRiddleDelete,onRiddleNewQuestions:this.handleRiddleNewQuestions}),s=React.createElement("a",{href:"/riddleadmin/index",title:"Tillbaka till admin",className:"btn btn-flat btn-blue"},"Tillbaka till admin"),this.state.data.length>0&&(e=React.createElement("button",{onClick:this.handleShowMap,className:"btn"},React.createElement("span",{className:"icon icon-place"})," Visa karta"))),React.createElement("div",{className:"riddle-creator"},o,i,f,u,"   ",e,r,s)}});React.render(React.createElement(RiddleCreator,{initialData:huntData.Riddles,huntId:huntData.HuntId}),document.getElementById("riddle-container"));var QuestionForm=React.createClass({displayName:"QuestionForm",isValid:function(){var n,t,i,r;return this.refs.description.getDOMNode().value?(n=this.refs.answer.getDOMNode().value,!n)?(toastIt("Du måste skriva in ett svar"),!1):(n=n.toLowerCase(),t=this.getDOMNode().querySelector('[name="AnswerType"]:checked').value,t==="trueorfalse"&&n!=="true"&&n!=="false")?(toastIt("Du måste skriva true eller false som svar"),!1):(i=/^[a-z 0-9]+$/i,t==="text"&&!i.test(n))?(toastIt("Endast bokstäver, siffror och mellanslag är tillåtet i svaret."),!1):(r=/^[0-9]+$/i,t==="number"&&!r.test(n))?(toastIt("Svaret måste vara en siffra"),!1):t==="multi"&&!this.refs.answeroptions.getDOMNode().value?(toastIt("Du måste skriva in minst ett alternativ till svaret"),!1):!0:(toastIt("Du måste skriva in en fråga"),!1)},handleSubmit:function(n){if(n.preventDefault(),!this.isValid())return!1;var t={};$("#question-form").serializeArray().map(function(n){t[n.name]=n.value});$("#question-form .make-empty").each(function(){$(this).val("")});this.props.onQuestionSubmit(t)},handleCancel:function(n){n.preventDefault();var i=this.state.original,t=this.state.question;t=$.extend(!0,t,i);this.setState({question:t});this.props.onQuestionCancel()},handleOptionClick:function(){var n=this.refs.multi.getDOMNode();n.checked?$(".answersoptions-container").removeClass("hide"):$(".answersoptions-container").addClass("hide")},handleUploadedImage:function(n){var t=this.state.question;t.ImageSrc=n;this.setState({question:t})},handleRemoveImage:function(n){if(n.preventDefault(),!confirm("Är du säker på att du vill ta bort bilden?"))return!1;var t=this.state.question,i=t.ImageSrc;t.ImageSrc="";this.setState({question:t});$.post("/image/removeImage",{src:i})},handleChange:function(n,t){var i=this.state.question;i[n]=t.target.value;this.setState({question:i})},getInitialState:function(){var n=$.extend(!0,{},this.props.question);return{question:this.props.question,original:n}},render:function(){var n="answersoptions-container",t,i;return this.state.question.AnswerType!=="multi"&&(n+=" hide"),this.state.question.ImageSrc?t=React.createElement("div",null,React.createElement("img",{src:this.state.question.ImageSrc})," ",React.createElement("br",null)," ",React.createElement("a",{href:"#",className:"btn btn-flat btn-sm btn-red",onClick:this.handleRemoveImage},"ta bort bild")):i=React.createElement(ImageUploader,{onImageUploaded:this.handleUploadedImage}),React.createElement("div",null,t,i,React.createElement("form",{id:"question-form",onSubmit:this.handleSubmit,className:"form"},React.createElement("input",{type:"hidden",name:"Id",value:this.props.question.Id}),React.createElement("input",{type:"hidden",name:"RiddleId",value:this.props.question.RiddleId}),React.createElement("input",{type:"hidden",name:"ImageSrc",value:this.state.question.ImageSrc,onChange:this.handleChange.bind(this,"ImageSrc")}),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Fråga"),React.createElement("textarea",{cols:"30",rows:"3",name:"Description",ref:"description",className:"form-control form-control-default make-empty",value:this.state.question.Description,onChange:this.handleChange.bind(this,"Description")})))),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Välj typ av svar"),React.createElement("div",{className:"radio radio-adv"},React.createElement("label",{htmlFor:"input-radio-1"},React.createElement("input",{className:"access-hide",id:"input-radio-1",name:"AnswerType",value:"text",type:"radio",checked:this.state.question.AnswerType==="text",onClick:this.handleOptionClick,onChange:this.handleChange.bind(this,"AnswerType")}),"Text som svar",React.createElement("span",{className:"circle"}),React.createElement("span",{className:"circle-check"}))),React.createElement("div",{className:"radio radio-adv"},React.createElement("label",{htmlFor:"input-radio-2"},React.createElement("input",{className:"access-hide",id:"input-radio-2",name:"AnswerType",value:"number",type:"radio",checked:this.state.question.AnswerType==="number",onClick:this.handleOptionClick,onChange:this.handleChange.bind(this,"AnswerType")}),"Siffra som svar",React.createElement("span",{className:"circle"}),React.createElement("span",{className:"circle-check"}))),React.createElement("div",{className:"radio radio-adv"},React.createElement("label",{htmlFor:"input-radio-3"},React.createElement("input",{className:"access-hide",id:"input-radio-3",name:"AnswerType",value:"multi",ref:"multi",type:"radio",checked:this.state.question.AnswerType==="multi",onClick:this.handleOptionClick,onChange:this.handleChange.bind(this,"AnswerType")}),"Flerval",React.createElement("span",{className:"circle"}),React.createElement("span",{className:"circle-check"}))),React.createElement("div",{className:"radio radio-adv"},React.createElement("label",{htmlFor:"input-radio-4"},React.createElement("input",{className:"access-hide",id:"input-radio-4",name:"AnswerType",value:"trueorfalse",type:"radio",checked:this.state.question.AnswerType==="trueorfalse",onClick:this.handleOptionClick,onChange:this.handleChange.bind(this,"AnswerType")}),"Sant eller falskt ",React.createElement("small",null,"(skriv ",React.createElement("strong",null,"true")," eller ",React.createElement("strong",null,"false")," som svar)"),React.createElement("span",{className:"circle"}),React.createElement("span",{className:"circle-check"})))),React.createElement("div",{className:"form-group "+n},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("textarea",{cols:"30",rows:"3",className:"form-control form-control-default make-empty",name:"AnswerOptions",ref:"answeroptions",value:this.state.question.AnswerOptions,onChange:this.handleChange.bind(this,"AnswerOptions")}),React.createElement("span",{className:"form-help form-help-msg"},"Skriv in alternativ till svaret separerade med kommatecken ",React.createElement("strong",null,"(obs skriv ej in det faktiska svaret/svaren bland alternativen)"))))),React.createElement("div",{className:"form-group"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("label",null,"Svar"),React.createElement("textarea",{cols:"30",rows:"3",className:"form-control form-control-default make-empty",name:"Answer",ref:"answer",value:this.state.question.Answer,onChange:this.handleChange.bind(this,"Answer")}),React.createElement("span",{className:"form-help form-help-msg "+n},"Ska man välja flera alternativ för att svara rätt kan du separera svaren med kommatecken.")))),React.createElement("div",{className:"form-group-btn"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-6 col-md-8 col-sm-10"},React.createElement("button",{className:"btn btn-blue waves-button waves-light waves-effect",type:"submit"},"Spara")," ",React.createElement("a",{className:"btn btn-flat btn-red waves-button waves-effect",onClick:this.handleCancel},"Avbryt"))))))}}),QuestionList=React.createClass({displayName:"QuestionList",handleEditClick:function(n){this.props.onQuestionEdit(n)},handleDeleteClick:function(n){this.props.onQuestionDelete(n)},render:function(){var n=this.props.data.map(function(n){var t;return n.ImageSrc&&(t=React.createElement("div",{"class":"card-img"},React.createElement("img",{src:n.ImageSrc}))),React.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6"},React.createElement("div",{className:"card"},React.createElement("div",{className:"card-main"},t,React.createElement("div",{className:"card-inner"},React.createElement("p",{className:"card-heading text-alt"},n.Name),React.createElement("p",null,n.Description),React.createElement("p",null,n.Answer)),React.createElement("div",{className:"card-action"},React.createElement("ul",{className:"nav nav-list pull-left"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleEditClick.bind(this,n),title:"Ändra"},React.createElement("span",{className:"access-hide"},"Ändra"),React.createElement("span",{className:"icon icon-edit"}))),React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.handleDeleteClick.bind(this,n),title:"Ta bort"},React.createElement("span",{className:"access-hide"},"Ta bort"),React.createElement("span",{className:"icon icon-delete"}))))))))}.bind(this));return React.createElement("div",{className:"card-wrap"},React.createElement("div",{className:"row"},n))}}),QuestionCreator=React.createClass({displayName:"QuestionCreator",handleQuestionSubmit:function(n){n.Id>0?this.saveQuestionEdit(n):this.saveNewQuestion(n)},handleQuestionCancel:function(){var n=this.state.data;this.setState({data:n,showForm:!1})},saveNewQuestion:function(n){var t=this.state.data;$.post("/riddleadmin/AddQuestion",n,function(n){n.errors.length===0?(t.unshift(n.question),this.setState({data:t,showForm:!1})):console.log(n.errors)}.bind(this),"json")},saveQuestionEdit:function(n){var t=this.state.data;$.post("/riddleadmin/EditQuestion",n,function(n){n.errors.length===0?this.setState({data:t,showForm:!1}):console.log(n.errors)}.bind(this),"json")},handleQuestionsComplete:function(){this.props.onQuestionsComplete()},handleQuestionEdit:function(n){this.setState({question:n,showForm:!0})},handleNewQuestion:function(){var n={Id:0,RiddleId:this.state.riddle.Id};this.setState({question:n,showForm:!0})},handleQuestionDelete:function(n){var t,i;if(!confirm("Är du säker på att du vill ta bort frågan?"))return!1;for(t=this.state.data,$.post("/riddleadmin/deletequestion",{id:n.Id},"json"),i=t.length-1;i>=0;i--)if(t[i].Id===n.Id){t.splice(i,1);break}this.setState({data:t})},componentWillReceiveProps:function(n){var t={Id:0,RiddleId:n.riddle.Id};this.setState({data:n.riddle.Questions,riddle:n.riddle,question:t,showForm:!1})},getInitialState:function(){var n={Id:0,RiddleId:this.props.riddle.Id},t=this.props.riddle.Questions?!1:!0;return{data:this.props.riddle.Questions,riddle:this.props.riddle,question:n,showForm:t}},render:function(){var n,t,i,r;return this.state.showForm?n=React.createElement(QuestionForm,{onQuestionSubmit:this.handleQuestionSubmit,question:this.state.question,onQuestionCancel:this.handleQuestionCancel}):(t=React.createElement(QuestionList,{data:this.state.data,onQuestionEdit:this.handleQuestionEdit,onQuestionDelete:this.handleQuestionDelete,onNewQuestion:this.handleNewQuestion}),i=React.createElement("button",{className:"btn btn-blue",onClick:this.handleNewQuestion},"Ny fråga"),r=React.createElement("button",{onClick:this.handleQuestionsComplete,className:"btn btn-blue btn-flat"},"Klar med frågor")),React.createElement("div",{className:"question-creator"},React.createElement("h2",{className:"content-sub-heading"},"Hantera frågor för rebus med svaret ",this.props.riddle.Answer),n,i,t,r)}})