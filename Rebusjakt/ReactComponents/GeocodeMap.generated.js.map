{"version":3,"file":null,"sourceRoot":null,"sources":["GeocodeMap.jsx.source"],"sourcesContent":["\n\n\n\n\n\r\n    var GeocodeMap = React.createClass({\r\n        initMap : function(){\r\n\t\t\tvar lat = this.state.lat || 59.32932349999999;\r\n\t\t\tvar lng = this.state.lng || 18.068580800000063;\r\n\t\t\tvar mapOptions = {\r\n                zoom: 12,\r\n                center: new google.maps.LatLng(lat,lng)\r\n            };\r\n            var map = new google.maps.Map(React.findDOMNode(this.refs.map),\r\n                mapOptions);\r\n\r\n            google.maps.event.addListener(map,'click',function(event) { \r\n                var lat = event.latLng.lat();\r\n                var lng = event.latLng.lng();\r\n                var latlng = new google.maps.LatLng(lat,lng);\r\n                this.geoCodeIt({'latLng': latlng, 'region' : 'se'});\r\n            }.bind(this));\r\n\t\t\tvar marker = new google.maps.Marker({\r\n                position: map.getCenter(),\r\n                map: map\r\n            });\r\n\t\t\tthis.geocoder = new google.maps.Geocoder();\r\n\t\t\tthis.map = map;\r\n\t\t\tthis.marker = marker;\r\n        },\r\n        geoCodeIt : function(data){\r\n            var geocoder = this.geocoder;\r\n            var map = this.map;\r\n\t\t\tvar marker = this.marker;\r\n            geocoder.geocode(data, function(results, status) {\r\n                if (status == google.maps.GeocoderStatus.OK) {    \r\n\t\t\t\t\tmap.setCenter(results[0].geometry.location);                \r\n                    var location = results[0].geometry.location;\r\n                    marker.setPosition(location);\r\n\t\t\t\t\tvar lat = location.lat();\r\n\t\t\t\t\tvar lng = location.lng();\r\n\t\t\t\t\tthis.setState({lat: lat, lng: lng});\r\n                    this.props.onPickPosition({'lat': lat , 'lng' : lng });\r\n                    if (results[0].geometry.viewport){\r\n                        map.fitBounds(results[0].geometry.viewport);\t\t\t\t\t\r\n\t\t\t\t\t} \t\t\t\t\t\t\r\n                } else {\r\n                    alert('Geocode was not successful for the following reason: ' + status);\r\n                }\r\n            }.bind(this));\r\n        },\r\n        handleSubmit : function(e){\r\n            e.preventDefault();            \r\n            var address = React.findDOMNode(this.refs.address).value.trim();\r\n            this.geoCodeIt({ 'address': address, 'region': 'se'});            \r\n        },\r\n\t\tcomponentWillReciveProps: function(nextProps){\r\n\t\t\tthis.setState({ lat: nextProps.lat, lng: nextProps.lng });\r\n\t\t\tthis.initMap();\r\n\t\t},\r\n\t\tgetInitialState: function() {\r\n            return { lat: this.props.lat, lng: this.props.lng };\r\n        },\r\n        componentDidMount: function(){\r\n            this.initMap();\r\n\t\t\t$(\".txt-address\").focus();\r\n        },\r\n        render: function () {\r\n            return(\r\n                    <div>\r\n\t\t\t\t\t\t<h2 className=\"content-sub-heading\">Välj kartposition</h2>\r\n                        <p>\r\n                            Sök efter en plats eller klicka på kartan för att markera kartposition.\r\n                        </p>\r\n                        <form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-lg-12\">\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"form-control form-control-default txt-address input-inline\" placeholder=\"Plats\" type=\"text\" ref=\"address\"  />\r\n\t\t\t\t\t\t\t\t\t\t<input className=\"btn btn-blue btn-inline\" type=\"submit\" value=\"Sök\" />\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n                        </form>           \r\n                        <div className=\"map-holder\" ref=\"map\"></div>\r\n                    </div>\r\n                );\r\n        }\r\n\r\n    });"],"names":[],"mappings":"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"}