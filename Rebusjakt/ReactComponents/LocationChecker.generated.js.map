{"version":3,"file":null,"sourceRoot":null,"sources":["LocationChecker.jsx.source"],"sourcesContent":["\n\n\n\n\n\r\nvar LocationChecker = React.createClass({\r\n\tunlock: function(isSuspicious){\r\n\t\tvar gameRiddle = this.state.gameRiddle;\r\n\t\tgameRiddle.hasQuestions = true;\r\n\t\tthis.setState({isUnlocked: true, isSuspicious: isSuspicious});\r\n\t},\r\n\thandleReturn: function(){\r\n\t\tthis.props.onReturn();\r\n\t},\r\n\thandleForceUnlock: function(){\r\n\t\tthis.unlock(true);\r\n\t},\r\n\thandlePosition: function(position){\r\n\t\t$.post(\"/game/CalculateDistance\",\r\n\t\t\t{\r\n\t\t\t\tsLatitude: position.coords.latitude,\r\n\t\t\t\tsLongitude: position.coords.longitude,\r\n\t\t\t\teLatitude: this.state.lat,\r\n\t\t\t\teLongitude: this.state.lng\r\n\t\t\t},\r\n\t\t\tfunction(distance){\r\n\t\t\t\tdistance = Math.round(distance);\r\n\t\t\t\tif(distance <= 50){\r\n\t\t\t\t\tthis.unlock(false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.setState({distance: distance, showAlternative: true});\r\n\t\t\t\t}\r\n\t\t\t}.bind(this),\"json\");\r\n\t},\r\n\thandleError: function(error){\r\n\t/*\r\n\t\tswitch(error.code) {\r\n\t\t\tcase error.PERMISSION_DENIED:\r\n\t\t\t\tconsole.log(\"User denied the request for Geolocation.\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase error.POSITION_UNAVAILABLE:\r\n\t\t\t\tconsole.log(\"Location information is unavailable.\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase error.TIMEOUT:\r\n\t\t\t\tconsole.log(\"The request to get user location timed out.\");\r\n\t\t\t\tbreak;\r\n\t\t\tcase error.UNKNOWN_ERROR:\r\n\t\t\t\tconsole.log(\"An unknown error occurred.\");\r\n\t\t\t\tbreak;\r\n\t\t}*/\r\n\t\tthis.setState({showAlternative: true});\r\n\t},\r\n\thandleCheckLocation: function(){\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(this.handlePosition);\r\n\t\t} else {\r\n\t\t\tthis.setState({showAlternative: true});\r\n\t\t}\r\n\t},\r\n\tcomponentWillReceiveProps: function(nextProps){\r\n\t\tvar riddle = nextProps.gameRiddle.riddle;\r\n\t\tvar location = riddle.LocationName;\r\n\t\tvar lat = riddle.Latitude;\r\n\t\tvar lng = riddle.Longitude;\r\n        this.setState({gameRiddle:nextProps.gameRiddle, lat : lat, lng: lng, location: location });\r\n    },\r\n\tgetInitialState: function(){\t\t\r\n\t\tvar riddle = this.props.gameRiddle.riddle;\r\n\t\tvar location = riddle.LocationName;\r\n\t\tvar lat = riddle.Latitude;\r\n\t\tvar lng = riddle.Longitude;\r\n\t\treturn { gameRiddle:this.props.gameRiddle, lat : lat, lng: lng, location: location };\r\n\t},\r\n\trender: function(){\r\n\t\tvar unlocked, altbutton, suspicious, distanceMessage;\r\n\t\tif(this.state.distance){\r\n\t\t\tdistanceMessage = <p>Du befinner dig just nu ca {this.state.distance} m därifrån</p>;\r\n\t\t}\r\n\t\tif(this.state.showAlternative){\r\n\t\t\taltbutton = <p><button className=\"btn btn-red\" onClick={this.handleForceUnlock}>Jag svär jag är där!</button></p>;\r\n\t\t}\r\n\t\tif(this.state.isSuspicious){\r\n\t\t\tsuspicious = <img src=\"/images/suspicious.jpg\" alt=\"Suspicious\" />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h2 className=\"content-sub-heading\">Bege dig till {this.state.location}</h2>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isUnlocked ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{suspicious}\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tPlatsen är upplåst!\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tDu måste befinna dig inom 50 m från platsen.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{distanceMessage}\r\n\t\t\t\t\t\t<button className=\"btn btn-blue\" onClick={this.handleCheckLocation}>Jag är där</button>\r\n\t\t\t\t\t\t{altbutton}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<a href=\"#\" onClick={this.handleReturn}>Tillbaka</a>\r\n\t\t\t\t</p>\r\n\t\t\t\t<GoogleMap lat={this.state.lat} lng={this.state.lng} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n});\r\n"],"names":[],"mappings":"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"}